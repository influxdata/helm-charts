# Staging Configuration
# - Medium resource allocation
# - AWS S3 storage
# - Multiple replicas for testing HA
# - Network policies enabled

cluster:
  id: "staging-cluster"

objectStorage:
  type: s3
  bucket: "influxdb3-staging"
  s3:
    enabled: true
    region: "us-east-1"
    accessKeyId: "STAGING_ACCESS_KEY"
    secretAccessKey: "STAGING_SECRET_KEY"

license:
  type: "trial"
  email: "staging@example.com"

ingester:
  enabled: true
  replicas: 2
  resources:
    requests:
      cpu: "2000m"
      memory: "4Gi"
    limits:
      cpu: "4000m"
      memory: "8Gi"
  threads:
    io: 8
    datafusion: 16
  persistence:
    enabled: true
    size: "20Gi"

querier:
  enabled: true
  replicas: 2
  resources:
    requests:
      cpu: "2000m"
      memory: "4Gi"
    limits:
      cpu: "4000m"
      memory: "8Gi"
  threads:
    io: 4
    datafusion: 20

compactor:
  enabled: true
  resources:
    requests:
      cpu: "2000m"
      memory: "2Gi"
    limits:
      cpu: "4000m"
      memory: "4Gi"

processingEngine:
  enabled: false

ingress:
  write:
    enabled: true
    className: "nginx"
    hosts:
      - host: writes-staging.influxdb.example.com
        paths:
          - path: /
            pathType: Prefix
  query:
    enabled: true
    className: "nginx"
    hosts:
      - host: query-staging.influxdb.example.com
        paths:
          - path: /
            pathType: Prefix

networkPolicy:
  enabled: true

serviceMonitor:
  enabled: true
  interval: 30s
