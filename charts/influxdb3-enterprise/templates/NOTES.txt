Thank you for installing {{ .Chart.Name }}!

Your InfluxDB 3 Enterprise cluster has been deployed to namespace {{ .Release.Namespace }}.

Components deployed:
{{- if .Values.ingester.enabled }}
  ✓ Ingesters: {{ .Values.ingester.replicas }} replica(s)
{{- end }}
{{- if .Values.querier.enabled }}
  ✓ Queriers: {{ .Values.querier.replicas }} replica(s)
{{- end }}
{{- if .Values.compactor.enabled }}
  ✓ Compactor: 1 replica
{{- end }}
{{- if .Values.processingEngine.enabled }}
  ✓ Processing Engine: {{ .Values.processingEngine.replicas }} replica(s)
{{- end }}

{{- if .Values.ingress.enabled }}
Note: Ingress is enabled by default. Override `ingress.host` with your domain; leaving it as "{{ .Values.ingress.host }}" may cause 404s when sending write or query requests through the ingress.
{{- end }}

Access endpoints:
{{- if .Values.ingress.enabled }}
  Write endpoint: http{{ if .Values.ingress.tls }}s{{ end }}://{{ .Values.ingress.host }}:{{ .Values.ingress.port }}
  Query endpoint: http{{ if .Values.ingress.tls }}s{{ end }}://{{ .Values.ingress.host }}:{{ .Values.ingress.port }}
{{- else }}
  Write endpoint: kubectl port-forward svc/{{ include "influxdb3-enterprise.fullname" . }}-ingester 8181:8181 -n {{ .Release.Namespace }}
  Query endpoint: kubectl port-forward svc/{{ include "influxdb3-enterprise.fullname" . }}-querier 8181:8181 -n {{ .Release.Namespace }}
{{- end }}

Getting started:

  1. Create an admin token:

     kubectl exec -it {{ include "influxdb3-enterprise.fullname" . }}-ingester-0 -n {{ .Release.Namespace }} -- \
        influxdb3 create token --admin

  2. Create a database:

     export INFLUXDB3_AUTH_TOKEN=<your-admin-token>
{{- if .Values.ingress.enabled }}
     export INFLUXDB3_HOST_URL=http{{ if .Values.ingress.tls }}s{{ end }}://{{ .Values.ingress.host }}:{{ .Values.ingress.port }}
{{- else }}
     export INFLUXDB3_HOST_URL=http://localhost:8181
{{- end }}
     influxdb3 create database mydb

  3. Write data:

     influxdb3 write mydb "measurement field=value"

  4. Query data:

     influxdb3 query mydb "SELECT * FROM measurement"

Documentation: https://docs.influxdata.com/influxdb3/enterprise/

{{- if not .Values.license.email }}
{{- if not .Values.license.existingSecret }}

⚠️  WARNING: No license configured!
    Set .Values.license.email or .Values.license.existingSecret to activate your license.
{{- end }}
{{- end }}
